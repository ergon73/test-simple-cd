# üêç Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Docker

–ü—Ä–æ—Å—Ç–æ–µ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.11
- Flask 3.0
- Docker
- Gunicorn

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üê≥ –ó–∞–ø—É—Å–∫ —Å Docker Hub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å–∫ –≥–æ—Ç–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ —Å Docker Hub
docker run -d -p 5000:5000 --name flask-test ergon73/flask-app:latest

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
curl http://localhost:5000/
```

### üî® –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞

1. **–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞:**
```bash
docker build -t my-flask-app .
```

2. **–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
```bash
docker run -d -p 5000:5000 --name flask-test my-flask-app
```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**
```bash
curl http://localhost:5000/
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ docker-compose

```bash
# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

## üìã API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### GET /
–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –∏ —Å–ø–∏—Å–∫–æ–º –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "status": "success",
  "message": "Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ",
  "endpoints": [
    "GET / - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞",
    "GET /info - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ",
    "GET /calc/<a>/<b> - –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä",
    "GET /health - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è"
  ],
  "timestamp": "2025-01-27T10:30:00.000000"
}
```

### GET /info
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ (–≤–µ—Ä—Å–∏—è Python, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞).

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "status": "success",
  "data": {
    "system_info": {
      "python_version": "3.11.0",
      "platform": "Linux-5.4.0-74-generic-x86_64-with-glibc2.31",
      "processor": "x86_64",
      "architecture": "x86_64",
      "uptime_seconds": 120.5
    }
  },
  "timestamp": "2025-01-27T10:30:00.000000"
}
```

### GET /calc/<a>/<b>
–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏:
- –°–ª–æ–∂–µ–Ω–∏–µ: `a + b`
- –í—ã—á–∏—Ç–∞–Ω–∏–µ: `a - b`
- –£–º–Ω–æ–∂–µ–Ω–∏–µ: `a * b`
- –î–µ–ª–µ–Ω–∏–µ: `a / b` (—Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl http://localhost:5000/calc/10/5
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "status": "success",
  "data": {
    "a": 10.0,
    "b": 5.0,
    "results": {
      "addition": 15.0,
      "subtraction": 5.0,
      "multiplication": 50.0,
      "division": 2.0
    }
  },
  "timestamp": "2025-01-27T10:30:00.000000"
}
```

### GET /health
–ü—Ä–æ—Å—Ç–æ–π health-check —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "status": "healthy",
  "uptime_seconds": 120.5,
  "timestamp": "2025-01-27T10:30:00.000000"
}
```

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```bash
# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
curl http://localhost:5000/

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
curl http://localhost:5000/info

# –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
curl http://localhost:5000/calc/10/5
curl http://localhost:5000/calc/15/3

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:5000/health
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- http://localhost:5000/ - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- http://localhost:5000/info - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
- http://localhost:5000/calc/10/5 - –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
- http://localhost:5000/health - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

## üê≥ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker logs flask-test

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stop flask-test

# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker rm flask-test

# –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞
docker rmi my-flask-app
```

### –û—Ç–ª–∞–¥–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
docker run -it --rm -p 5000:5000 my-flask-app

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
docker exec -it flask-test /bin/bash
```

### –û—á–∏—Å—Ç–∫–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stop flask-test && docker rm flask-test

# –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞
docker rmi my-flask-app

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
docker system prune -a
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
test-simple-cd/
‚îú‚îÄ‚îÄ app.py                 # Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt       # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .dockerignore         # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `FLASK_APP=app.py` - —É–∫–∞–∑—ã–≤–∞–µ—Ç Flask –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
- `PYTHONUNBUFFERED=1` - –æ—Ç–∫–ª—é—á–∞–µ—Ç –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é Python

### –ü–æ—Ä—Ç

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 5000. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—Ç–∞:

1. –í `Dockerfile` –∏–∑–º–µ–Ω–∏—Ç–µ `EXPOSE 5000`
2. –í `docker-compose.yml` –∏–∑–º–µ–Ω–∏—Ç–µ `"5000:5000"` –Ω–∞ `"–ù–û–í–´–ô_–ü–û–†–¢:5000"`
3. –í –∫–æ–º–∞–Ω–¥–µ `docker run` –∏–∑–º–µ–Ω–∏—Ç–µ `-p 5000:5000` –Ω–∞ `-p –ù–û–í–´–ô_–ü–û–†–¢:5000`

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—à–∏–±–∫–∏:

- **–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å**: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–û—à–∏–±–∫–∞: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å"
- **–ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 400 —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏
- **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞**: health check –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

## üê≥ Docker Hub

–û–±—Ä–∞–∑ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ Docker Hub: **ergon73/flask-app:latest**

```bash
# –ó–∞–ø—É—Å–∫ —Å Docker Hub (–±–µ–∑ —Å–±–æ—Ä–∫–∏)
docker run -d -p 5000:5000 --name flask-test ergon73/flask-app:latest

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
curl http://localhost:5000/
```

**–°—Å—ã–ª–∫–∞ –Ω–∞ Docker Hub:** https://hub.docker.com/r/ergon73/flask-app

## üìù –ê–≤—Ç–æ—Ä

**ergon73**  
–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/ergon73/test-simple-cd  
Docker Hub: https://hub.docker.com/r/ergon73/flask-app

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö.
